//to prevent game from restarting when important npcs die
ent_remove_all player_loadsaved
//to prevent game from removing invulnerability in d1_trainstation_03
ent_remove gordon_invulnerable
//When explosions happen so often blood effects become a nuisance.
g_ragdoll_lvfadespeed 0
violence_hblood 0
global_set gordon_invulnerable 1

//no sound, no fireball, stays after explosion, no scorch effect, no particles all set with spawnflags
ent_create env_explosion targetname physexplode imagnitude 100 iRadiusOverride 3000 spawnflags 598
ent_fire viewmodel addoutput "targetname explosioncarrier"

//player does not have attachments so must attach to viewmodel
ent_fire physexplode setparent explosioncarrier

//0 for crowbar, bugbait, rpg
ent_fire physexplode setparentattachment 0

//muzzle for firearms as they do not have attachment '0'
ent_fire physexplode setparentattachment muzzle

//bolt_end for crossbow as it does not have attachment 'muzzle'
ent_fire physexplode setparentattachment bolt_end

ent_create logic_timer targetname explodetimer refiretime 0.01
ent_fire explodetimer addoutput "OnTimer physexplode,Explode,,0,-1"
ent_fire explodetimer addoutput "OnTimer npc_alyx,makeregularally,,0,-1"
ent_fire explodetimer addoutput "OnTimer npc_barney,makeregularally,,0,-1"
//entities with damage filters are not repelled
ent_fire explodetimer addoutput "OnTimer prop_physics,setdamagefilter,,0,-1"
ent_fire explodetimer addoutput "OnTimer vort,makeregularally,,0,-1"